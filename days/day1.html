<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>–¢–∞–π–Ω—ã–π –°–∞–Ω—Ç–∞</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../styles.css">
  <link href="https://cdn.jsdelivr.net/gh/Alaev-Co/snowflakes/dist/snow.min.css" rel="stylesheet">
</head>
<body>

  <!-- BACKGROUND -->
  <div class="background">
    <div class="trees">
      <div class="tree"></div>
      <div class="tree"></div>
      <div class="tree"></div>
      <div class="tree"></div>
    </div>
    <div class="snow"></div>
    <div class="santa">üéÖ</div>
  </div>

  <!-- CONTENT -->
  <div class="container">
    <div class="card">
      <h1>–î–µ–Ω—å 1</h1>

      <div class="game gifts-game">
        <div class="gifts-grid" id="giftsGrid"></div>

        <div class="subtitle">
          –ù–∞–π–¥–∏ <b>3 –Ω–µ–ø—É—Å—Ç—ã—Ö –ø–æ–¥–∞—Ä–∫–∞</b> üéÅ<br>
          –£ —Ç–µ–±—è <span id="tries">6</span> –ø–æ–ø—ã—Ç–æ–∫
        </div>

        <div id="gameMessage" class="result hidden"></div>
      </div>

      <a href="../index.html" class="btn">–ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
    </div>
  </div>


  <script src="https://cdn.jsdelivr.net/gh/Alaev-Co/snowflakes/dist/Snow.min.js"></script>
   <script>
      new Snow ();
   </script>
   <script src="scripts.js"></script>


    <script>
      // --- –î–µ–Ω—å 1 ---
      const grid = document.getElementById('giftsGrid');
      const triesEl = document.getElementById('tries');
      const message = document.getElementById('gameMessage');

      if (grid) {
        const TOTAL_GIFTS = 9;
        const FULL_GIFTS = 3;
        let tries = 6;
        let found = 0;
        let gameOver = false;

        // —Å–æ–∑–¥–∞—ë–º –º–∞—Å—Å–∏–≤ –ø–æ–¥–∞—Ä–∫–æ–≤
        const gifts = Array(TOTAL_GIFTS).fill('empty');

        // —Ä–∞–Ω–¥–æ–º–Ω–æ –≤—ã–±–∏—Ä–∞–µ–º 3 –Ω–µ–ø—É—Å—Ç—ã—Ö
        let placed = 0;
        while (placed < FULL_GIFTS) {
          const i = Math.floor(Math.random() * TOTAL_GIFTS);
          if (gifts[i] === 'empty') {
            gifts[i] = 'full';
            placed++;
          }
        }

        // —Ä–µ–Ω–¥–µ—Ä –ø–æ–¥–∞—Ä–∫–æ–≤
        gifts.forEach(type => {
          const gift = document.createElement('div');
          gift.className = 'gift';
          gift.textContent = 'üéÅ';

          gift.addEventListener('click', () => {
            if (gameOver || gift.classList.contains('opened')) return;

            gift.classList.add('opened');
            tries--;
            triesEl.textContent = tries;

            if (type === 'full') {
              gift.textContent = '‚≠ê';
              gift.classList.add('full');
              found++;

              if (found === FULL_GIFTS) {
                gameOver = true;
                message.textContent = 'üéÅ –£–†–ê! –°–õ–û–í–ê –î–ù–Ø: –î–õ–ò–¢–°–Ø';
                message.className = 'result win';
                message.classList.remove('hidden');
              }
            } else {
              gift.textContent = '‚ùÑÔ∏è';
              gift.classList.add('empty');
            }

            if (tries === 0 && !gameOver) {
              gameOver = true;
              message.textContent = '‚ùå –ü–æ–ø—ã—Ç–∫–∏ –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å. –°–µ–≥–æ–¥–Ω—è –±–µ–∑ —Å–ª–æ–≤–∞.';
              message.className = 'result lose';
              message.classList.remove('hidden');
            }
          });

          grid.appendChild(gift);
        });
      }
    </script>


</body>
</html>
